{% load static %}
{% block extra_head %}
    <script src="{% static 'htmx.min.js' %}" defer></script>
{% endblock extra_head %}

<!--

Follow me on
Dribbble: https://dribbble.com/supahfunk
Twitter: https://twitter.com/supahfunk
Codepen: https://codepen.io/supah/
https://codepen.io/supah/pen/XdKMJK
-->
<form   class="search-form w-5/6 h-16 mt-20"
        hx-post={% url 'api-search' %}
        hx-trigger="keyup delay:0.5s"
        hx-target="#feed"
        hx-indicator=".htmx-indicator"
    >
    <input id="search-input"type="search" name="search" placeholder="Search" class="search-input text-3xl h-16 w-full focus:borer-0 focus:ring-0 border-0">
    <button type="submit" class="search-button h-full flex items-center">
      <svg class="submit-button ">
        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#search"></use>
      </svg>
    </button>
    <div class="search-option h-16 flex items-center justify-end">
      <div>
        <input name="type" type="radio" value="users" id="type-users">
        <label for="type-users">
          <svg class="edit-pen-title">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#user"></use>
          </svg>
          <span>Users</span>
        </label>
      </div>
      
      <div>
        <input name="type" type="radio" value="articles" id="type-posts">
        <label for="type-posts">
          <svg class="edit-pen-title">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#post"></use>
          </svg>
          <span>Articles</span>
        </label>
      </div>
      <div>
        <input name="type" type="radio" value="recipes" id="type-images">
        <label for="type-images">
          <svg class="edit-pen-title">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#images"></use>
          </svg>
          <span>Recipes</span>
        </label>
      </div>
      <div>
        <input name="type" type="radio" value="all" id="type-special" checked="">
        <label for="type-special">
          <svg class="edit-pen-title">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#special"></use>
          </svg>
          <span>All</span>
        </label>
      </div>
    </div>
  </form>
  
  <svg xmlns="http://www.w3.org/2000/svg" width="0" height="0" display="none">
    <symbol id="search" viewBox="0 0 32 32">
      <path d="M 19.5 3 C 14.26514 3 10 7.2651394 10 12.5 C 10 14.749977 10.810825 16.807458 12.125 18.4375 L 3.28125 27.28125 L 4.71875 28.71875 L 13.5625 19.875 C 15.192542 21.189175 17.250023 22 19.5 22 C 24.73486 22 29 17.73486 29 12.5 C 29 7.2651394 24.73486 3 19.5 3 z M 19.5 5 C 23.65398 5 27 8.3460198 27 12.5 C 27 16.65398 23.65398 20 19.5 20 C 15.34602 20 12 16.65398 12 12.5 C 12 8.3460198 15.34602 5 19.5 5 z" />
    </symbol>
    <symbol id="user" viewBox="0 0 32 32">
      <path d="M 16 4 C 12.145852 4 9 7.1458513 9 11 C 9 13.393064 10.220383 15.517805 12.0625 16.78125 C 8.485554 18.302923 6 21.859881 6 26 L 8 26 C 8 21.533333 11.533333 18 16 18 C 20.466667 18 24 21.533333 24 26 L 26 26 C 26 21.859881 23.514446 18.302923 19.9375 16.78125 C 21.779617 15.517805 23 13.393064 23 11 C 23 7.1458513 19.854148 4 16 4 z M 16 6 C 18.773268 6 21 8.2267317 21 11 C 21 13.773268 18.773268 16 16 16 C 13.226732 16 11 13.773268 11 11 C 11 8.2267317 13.226732 6 16 6 z" /></symbol>
    <symbol id="images" viewbox="0 0 32 32">
        {% comment %} <path  d="M17.5 2.75a.75.75 0 0 0-1.5 0v4.014c-2.026-1.356-4.866-.88-6.292 1.216L2.355 18.786c-.556.818-.45 1.91.255 2.608a2.1 2.1 0 0 0 2.667.23l10.79-7.469A4.454 4.454 0 0 0 17.242 8h4.007a.75.75 0 0 0 0-1.5h-2.69l3.22-3.22a.75.75 0 0 0-1.06-1.06L17.5 5.439zm-6.54 6.063c1.062-1.561 3.3-1.776 4.646-.445a2.97 2.97 0 0 1-.405 4.565l-10.788 7.47a.58.58 0 0 1-.736-.064a.564.564 0 0 1-.07-.72z"/> {% endcomment %}
        {% comment %} <path  d="M9 10.99a1 1 0 1 0 0-2a1 1 0 0 0 0 2m5 1.998a1 1 0 1 1-2 0a1 1 0 0 1 2 0m-5 3.998a1 1 0 1 0 0-2a1 1 0 0 0 0 2M5 4.66c0-1.497 1.23-2.805 2.82-2.648A20.782 20.782 0 0 1 21.262 8.84c1.07 1.193.737 2.964-.479 3.845c-1.582 1.148-3.94 2.857-5.283 3.833c-.002.437-.002.721-.001 1.092v.628a1.75 1.75 0 0 1-2.056 1.724c-.204.826-.932 1.527-1.944 1.527c-.7 0-1.262-.335-1.609-.815l-1.325.957c-1.488 1.074-3.57.011-3.569-1.826zm2.673-1.155c-.609-.06-1.174.443-1.174 1.155v.52a17.547 17.547 0 0 1 12.985 6.594l.419-.304c.578-.42.652-1.173.242-1.63A19.282 19.282 0 0 0 7.673 3.507m-1.177 16.3a.75.75 0 0 0 1.19.608l2.128-1.533a.75.75 0 0 1 1.188.608c0 .27.209.5.497.5a.497.497 0 0 0 .502-.5v-1.251a.75.75 0 0 1 1.5 0c0 .14.111.25.248.25a.25.25 0 0 0 .25-.25v-.622c-.001-.47-.002-.808.005-1.489a.75.75 0 0 1 .308-.6c.902-.656 2.496-1.812 3.956-2.87a16.04 16.04 0 0 0-11.77-5.974z"/> {% endcomment %}
        
      <path d="M 2 5 L 2 6 L 2 26 L 2 27 L 3 27 L 29 27 L 30 27 L 30 26 L 30 6 L 30 5 L 29 5 L 3 5 L 2 5 z M 4 7 L 28 7 L 28 20.90625 L 22.71875 15.59375 L 22 14.875 L 21.28125 15.59375 L 17.46875 19.40625 L 11.71875 13.59375 L 11 12.875 L 10.28125 13.59375 L 4 19.875 L 4 7 z M 24 9 C 22.895431 9 22 9.8954305 22 11 C 22 12.104569 22.895431 13 24 13 C 25.104569 13 26 12.104569 26 11 C 26 9.8954305 25.104569 9 24 9 z M 11 15.71875 L 20.1875 25 L 4 25 L 4 22.71875 L 11 15.71875 z M 22 17.71875 L 28 23.71875 L 28 25 L 23.03125 25 L 18.875 20.8125 L 22 17.71875 z" />
    </symbol>
    <symbol id="post" viewbox="0 0 32 32">
        <path fill="currentColor" d="M56 144a8 8 0 0 1-8 8H24a8 8 0 0 1 0-16h8V72h-8a8 8 0 0 1 0-16h16a8 8 0 0 1 6.78 3.74L80 112.91l33.22-53.15A8 8 0 0 1 120 56h16a8 8 0 0 1 0 16h-8v64h8a8 8 0 0 1 0 16h-24a8 8 0 0 1 0-16V91.89l-25.22 40.35a8 8 0 0 1-13.56 0L48 91.89V136a8 8 0 0 1 8 8m184-24h-72a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h72a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8m0 48H72a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h168a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8m0-96h-72a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h72a8 8 0 0 0 8-8V80a8 8 0 0 0-8-8"/>
      <path d="M 3 5 L 3 6 L 3 23 C 3 25.209804 4.7901961 27 7 27 L 25 27 C 27.209804 27 29 25.209804 29 23 L 29 13 L 29 12 L 28 12 L 23 12 L 23 6 L 23 5 L 22 5 L 4 5 L 3 5 z M 5 7 L 21 7 L 21 12 L 21 13 L 21 23 C 21 23.73015 21.221057 24.41091 21.5625 25 L 7 25 C 5.8098039 25 5 24.190196 5 23 L 5 7 z M 7 9 L 7 10 L 7 13 L 7 14 L 8 14 L 18 14 L 19 14 L 19 13 L 19 10 L 19 9 L 18 9 L 8 9 L 7 9 z M 9 11 L 17 11 L 17 12 L 9 12 L 9 11 z M 23 14 L 27 14 L 27 23 C 27 24.190196 26.190196 25 25 25 C 23.809804 25 23 24.190196 23 23 L 23 14 z M 7 15 L 7 17 L 12 17 L 12 15 L 7 15 z M 14 15 L 14 17 L 19 17 L 19 15 L 14 15 z M 7 18 L 7 20 L 12 20 L 12 18 L 7 18 z M 14 18 L 14 20 L 19 20 L 19 18 L 14 18 z M 7 21 L 7 23 L 12 23 L 12 21 L 7 21 z M 14 21 L 14 23 L 19 23 L 19 21 L 14 21 z" />
    </symbol>
    <symbol id="special" viewbox="0 0 32 32">
        {% comment %} <path  d="M18.6 6.62c-1.44 0-2.8.56-3.77 1.53L7.8 14.39c-.64.64-1.49.99-2.4.99c-1.87 0-3.39-1.51-3.39-3.38S3.53 8.62 5.4 8.62c.91 0 1.76.35 2.44 1.03l1.13 1l1.51-1.34L9.22 8.2A5.37 5.37 0 0 0 5.4 6.62C2.42 6.62 0 9.04 0 12s2.42 5.38 5.4 5.38c1.44 0 2.8-.56 3.77-1.53l7.03-6.24c.64-.64 1.49-.99 2.4-.99c1.87 0 3.39 1.51 3.39 3.38s-1.52 3.38-3.39 3.38c-.9 0-1.76-.35-2.44-1.03l-1.14-1.01l-1.51 1.34l1.27 1.12a5.386 5.386 0 0 0 3.82 1.57c2.98 0 5.4-2.41 5.4-5.38s-2.42-5.37-5.4-5.37"/> {% endcomment %}
      <path d="M 4 4 L 4 5 L 4 27 L 4 28 L 5 28 L 27 28 L 28 28 L 28 27 L 28 5 L 28 4 L 27 4 L 5 4 L 4 4 z M 6 6 L 26 6 L 26 26 L 6 26 L 6 6 z M 16 8.40625 L 13.6875 13.59375 L 8 14.1875 L 12.3125 18 L 11.09375 23.59375 L 16 20.6875 L 20.90625 23.59375 L 19.6875 18 L 24 14.1875 L 18.3125 13.59375 L 16 8.40625 z M 16 13.3125 L 16.5 14.40625 L 17 15.5 L 18.1875 15.59375 L 19.40625 15.6875 L 18.5 16.5 L 17.59375 17.3125 L 17.8125 18.40625 L 18.09375 19.59375 L 17 19 L 16 18.40625 L 15 19 L 14 19.59375 L 14.3125 18.40625 L 14.5 17.3125 L 13.59375 16.5 L 12.6875 15.6875 L 13.90625 15.59375 L 15.09375 15.5 L 15.59375 14.40625 L 16 13.3125 z" />
    </symbol>
  </svg>
  <span class="htmx-indicator">{% include "patterns/components/spinner/spinner.html" %}</span>

<style>
  .search-form {
    position: relative;
    top: 50%;
    left: 50%;
    border-radius: 40px;
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
    transform: translate(-50%, -50%);
    background: #fff;
    transition: all 0.3s ease;
  }
  .search-form.focus {
    box-shadow: 0 3px 4px rgba(0, 0, 0, 0.15);
  }
  
  .search-input {
    position: absolute;
    left: 38px;
    background: none;
    color: #5a6674;
    -webkit-appearance: none;
       -moz-appearance: none;
            appearance: none;
    outline: none;
  }
  .search-input::-webkit-search-cancel-button {
    -webkit-appearance: none;
            appearance: none;
  }
  
  .search-button {
    position: absolute;
    left: 15px;
    padding: 0;
    margin: 0;
    border: none;
    background: none;
    outline: none !important;
    cursor: pointer;
  }
  .search-button svg {
    width: 30px;
    height: 30px;
    fill: #5a6674;
  }
  
  .search-option {
    position: absolute;
    text-align: right;
    right: 15px;
  }
  .search-option div {
    position: relative;
    display: inline-block;
    margin: 0 4px;
    cursor: pointer;
  }
  .search-option div input {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0.01;
    cursor: pointer;
  }
  .search-option div span {
    position: absolute;
    display: block;
    text-align: center;
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    background: #929AA3;
    color: #fff;
    font-size: 9px;
    letter-spacing: 1px;
    line-height: 1;
    text-transform: uppercase;
    padding: 4px 7px;
    border-radius: 12px;
    top: -18px;
    transition: all 0.2s ease-in-out;
  }
  .search-option div span::after {
    content: "";
    position: absolute;
    bottom: -3px;
    left: 50%;
    transform: translateX(-50%);
    border-top: 4px solid #929AA3;
    border-left: 4px solid transparent;
    border-right: 4px solid transparent;
    transition: all 0.2s ease-in-out;
  }
  .search-option div:hover span {
    opacity: 1;
    top: -21px;
  }
  .search-option div label {
    display: block;
    cursor: pointer;
  }
  .search-option div svg {
    
    height: 30px;
    width: 30px;
    fill: #5a6674;
    opacity: 0.6;
    transition: all 0.2s ease-in-out;
    pointer-events: none;
  }
  .search-option div:hover svg {
    opacity: 1;
  }
  .search-option div input:checked + label svg {
    fill: #e24040;
    opacity: 0.9;
  }
  .search-option div input:checked + label span {
    background: #e24040;
  }
  .search-option div input:checked + label span::after {
    border-top-color: #e24040;
  }
</style>

<script>
    document.querySelectorAll('.search-input').forEach(function(input) {
        input.addEventListener('focus', function() {
            this.parentNode.classList.add('focus');
        });
    
        input.addEventListener('blur', function() {
            this.parentNode.classList.remove('focus');
        });
    });
</script>